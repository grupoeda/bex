<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <element name="x-bexaxis" constructor="XBexAxis" extends="div">
      <template>
        <template if="!model.globalState.loading && model.globalState.serverState.queryState!=null && model.globalState.serverState.queryState.queryExecutionState!=null">          
          <div class="panelAxis">
            <div class="panelAxisColumn">
              <div class="axisHeader" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisRows, null)">Linhas</div>
              <template iterate="axis in model.globalState.serverState.queryState.queryExecutionState.newAxisRows">
                <div class="cell0" draggable="true" on-drag-start="_onDragStart($event, model.globalState.serverState.queryState.queryExecutionState.newAxisRows, axis)" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisRows, axis)">{{axis.value}}</div>
              </template>
            </div>
            <div class="panelAxisColumn">
              <div class="axisHeader" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisFree, null)">Caracteristicas Livres</div>              
              <template iterate="axis in model.globalState.serverState.queryState.queryExecutionState.newAxisFree">
                <div class="axisfree" draggable="true" on-drag-start="_onDragStart($event, model.globalState.serverState.queryState.queryExecutionState.newAxisFree, axis)" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisFree, axis)">{{axis.value}}</div>
              </template>
            </div>
            <div class="panelAxisColumn">
              <div class="axisHeader" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisColumns, null)">Colunas</div>
              <template iterate="axis in model.globalState.serverState.queryState.queryExecutionState.newAxisColumns">
                <div class="cell1" draggable="true" on-drag-start="_onDragStart($event, model.globalState.serverState.queryState.queryExecutionState.newAxisColumns, axis)" on-drag-end="_onDragEnd($event)" on-drag-enter="_onDragEnter($event)" on-drag-over="_onDragOver($event)" on-drag-leave="_onDragLeave($event)" on-drop="_onDrop($event, model.globalState.serverState.queryState.queryExecutionState.newAxisColumns, axis)">{{axis.value}}</div>
              </template>              
            </div>          
            <div class="clearBoth"></div>
          </div>
          <div class="panelbuttons">
            <button class="button" on-click="model.executeBex()">Executar</button>
            <button class="button" on-click="reset()">Reinicializar</button>
            <button class="button" on-click="clearNewAxisRows()">Remover Linhas</button>
            <button class="button" on-click="clearNewAxisColumns()">Remover Colunas</button>
            <button class="button" on-click="invert()">Trocar Linhas/Colunas</button>
          </div>        
        </template>
      </template>
      <script type="application/dart" src="x-bexaxis.dart"></script>
    </element>
  </body>
</html>
